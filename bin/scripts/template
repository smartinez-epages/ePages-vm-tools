#!/bin/bash
VERSION=1.0

SCRIPT=$0
NAME=$( basename ${SCRIPT} )
WRK_DIR=$( dirname ${SCRIPT} )

COMMON=${WRK_DIR}/common

VERBOSE=1
BATCHMODE=0
ACTION=none
PARAMETERS=
VALUE=0

#======================================================================================================================
# main
#======================================================================================================================
function main() {

  . ${COMMON}

  getOptions $*

  echo 
  echo "VERBOSE:     ${VERBOSE}"
  echo "VALUE:       ${VALUE}"
  echo "ACTION:      ${ACTION}"
  echo "PARAMETERS : ${PARAMETERS}"
  echo 

  case "${ACTION}" in

    one)
      one ${PARAMETERS}
      ;;

    two)
      two ${PARAMETERS}
      ;;

    *)
     error "Unknonw action '${ACTION}'"
     showHelp
  esac

  exit 0
}

#======================================================================================================================
# getOptions
#======================================================================================================================
function getOptions() {

  while getopts "qx:" OPTION
  do
    case ${OPTION} in
      q)
        VERBOSE=0
        ;;

      x)
        VALUE=${OPTARG}
        ;;

      *)
        showHelp
    esac
  done
  shift $((OPTIND-1))

  [ $# -eq 0 ] && showHelp

  ACTION=$1
  shift
  PARAMETERS="$*"
}

#======================================================================================================================
# one
#======================================================================================================================
function one() {
  log "one(${PARAMETERS})"
}

#======================================================================================================================
# two
#======================================================================================================================
function two() {
  log "two(${PARAMETERS})"
}

#======================================================================================================================
# Script execution starting point !!!
#======================================================================================================================
main $*

<<< DATA >>>

@@NAME@@ @@VERSION@@ : template script

Usage: @@NAME@@ [ -q ] [ -x value ] file1 file2


